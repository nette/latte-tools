Test: "filter" filter

{% set offset = 3 %}

{% for k, v in [1, 5, 3, 4, 5]|filter((v) => v > offset) -%}
    {{ k }} = {{ v }}
{% endfor %}

{% for k, v in {a: 1, b: 2, c: 5, d: 8}|filter(v => v > offset) -%}
    {{ k }} = {{ v }}
{% endfor %}

{% for k, v in {a: 1, b: 2, c: 5, d: 8}|filter((v, k) => (v > offset) and (k != "d")) -%}
    {{ k }} = {{ v }}
{% endfor %}

{% for k, v in [1, 5, 3, 4, 5]|filter(v => v > offset) -%}
    {{ k }} = {{ v }}
{% endfor %}

{% for k, v in it|filter((v) => v > offset) -%}
    {{ k }} = {{ v }}
{% endfor %}

{% for k, v in ita|filter(v => v > offset) -%}
    {{ k }} = {{ v }}
{% endfor %}

{% for k, v in xml|filter(x => true) %}
{{ k }}/{{ v }}
{% endfor %}

{# we can iterate more than once #}
{% for k, v in xml|filter(x => true) %}
{{ k }}/{{ v }}
{% endfor %}

{% set coll = ['a', 'b']|filter(v => v is same as('a')) %}
{% if coll|length > 0 %}
    {{- coll|join(', ') }}
{% endif %}
